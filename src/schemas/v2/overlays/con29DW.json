{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://trust.propdata.org.uk/schemas/v2/overlays/con29DW.json",
  "properties": {
    "propertyPack": {
      "properties": {
        "searches": {
          "items": {
            "oneOf": [
              null,
              {
                "properties": {
                  "results": {
                    "items": {
                      "oneOf": [
                        null,
                        null,
                        {
                          "required": [
                            "con29DW"
                          ],
                          "properties": {
                            "drainageAndWater": {
                              "properties": {
                                "maps": {
                                  "con29DWRef": "1",
                                  "title": "Maps",
                                  "required": [
                                    "publicSewerMapAttached",
                                    "waterworksMapAttached"
                                  ],
                                  "properties": {
                                    "publicSewerMapAttached": {
                                      "con29DWRef": "1.1",
                                      "title": "Is a copy of an extract from the public sewer map attached?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "waterworksMapAttached": {
                                      "con29DWRef": "1.2",
                                      "title": "Is a copy of an extract from the map of waterworks attached?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    }
                                  }
                                },
                                "drainage": {
                                  "con29DWRef": "2",
                                  "title": "Drainage",
                                  "required": [
                                    "publicFoulDrainage",
                                    "publicSurfaceDrainage",
                                    "surfaceDrainageCharge",
                                    "publicDrainWithinBoundaries",
                                    "publicSewerWithin100ft",
                                    "sewersSubjectOfAdoptionAgreement",
                                    "sewerageUndertakerApproval",
                                    "riskOfInternalFlooding",
                                    "distanceToNearestSewerageTreatment"
                                  ],
                                  "properties": {
                                    "publicFoulDrainage": {
                                      "con29DWRef": "2.1",
                                      "title": "Does foul water from the property drain to a public sewer?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "publicSurfaceDrainage": {
                                      "con29DWRef": "2.2",
                                      "title": "Does surface water from the property drain to a public sewer?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "surfaceDrainageCharge": {
                                      "con29DWRef": "2.3",
                                      "title": "Is a surface water drainage charge payable?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "publicDrainWithinBoundaries": {
                                      "con29DWRef": "2.4",
                                      "title": "Does the public sewer map indicate any public sewer, disposal main or lateral drain within the boundaries of the property?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "publicSewerWithin100ft": {
                                      "con29DWRef": "2.5",
                                      "title": "Does the public sewer map indicate any public sewer within 30.48 meters (100 feet) of any buildings within the property?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "sewersSubjectOfAdoptionAgreement": {
                                      "con29DWRef": "2.6",
                                      "title": "Are any sewers or lateral drains serving, or which are proposed to serve the property, the subject of an existing adoption agreement or an application for such an agreement?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "sewerageUndertakerApproval": {
                                      "con29DWRef": "2.7",
                                      "title": "Has the sewerage undertaker approved or been consulted about any plans to erect a building or extension on the property over, or in the vicinity of, a public sewer, disposal main or drain?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "riskOfInternalFlooding": {
                                      "con29DWRef": "2.8",
                                      "title": "Is any building which is or Charging forms part of the property, at risk of internal flooding due to overloaded public sewers?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "distanceToNearestSewerageTreatment": {
                                      "con29DWRef": "2.9",
                                      "title": "Please state the distance from the property to the nearest boundary of the nearest sewage treatment works."
                                    }
                                  }
                                },
                                "water": {
                                  "con29DWRef": "3",
                                  "title": "Drainage",
                                  "required": [
                                    "mainsWaterConnected",
                                    "waterMainsWithinBoundaries",
                                    "waterMainsSubjectOfAdoptionAgreement",
                                    "lowWaterPressureRisk",
                                    "waterQualityAnalysis",
                                    "authorisedDeparturesFrom2000Regulations",
                                    "waterMeterLocation"
                                  ],
                                  "properties": {
                                    "mainsWaterConnected": {
                                      "con29DWRef": "3.1",
                                      "title": "Is the property connected to the main water supply?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "waterMainsWithinBoundaries": {
                                      "con29DWRef": "3.2",
                                      "title": "Are there any water mains, resource mains or discharge pipes within the boundaries of the property?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "waterMainsSubjectOfAdoptionAgreement": {
                                      "con29DWRef": "3.3",
                                      "title": "Is any water main or service pipe serving, or which is proposed to serve the property, the subject of an existing adoption agreement or an application for such an agreement?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "lowWaterPressureRisk": {
                                      "con29DWRef": "3.4",
                                      "title": "Is the property at risk of receiving low water pressure or flow?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "waterQualityAnalysis": {
                                      "con29DWRef": "3.5",
                                      "title": "Please include details of a water quality analysis made by the water undertaker for the water supply zone in respect of the most recent calendar year."
                                    },
                                    "authorisedDeparturesFrom2000Regulations": {
                                      "con29DWRef": "3.6",
                                      "title": "Are there any departures authorised by the Secretary of State or National Assembly for Wales under Part 6 of the 2000 Regulations from the provisions of Part 3 of those Regulations.",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    },
                                    "waterMeterLocation": {
                                      "con29DWRef": "3.7",
                                      "title": "Is there a water meter serving the property?",
                                      "discriminator": {
                                        "propertyName": "yesNo"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "No"
                                              ]
                                            }
                                          }
                                        },
                                        {
                                          "properties": {
                                            "yesNo": {
                                              "enum": [
                                                "Yes"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "details"
                                          ]
                                        }
                                      ],
                                      "required": [
                                        "yesNo"
                                      ]
                                    }
                                  }
                                },
                                "charging": {
                                  "con29DWRef": "4",
                                  "title": "Charging",
                                  "required": [
                                    "sewerageProvider",
                                    "waterProvider",
                                    "sewerageBills",
                                    "waterBills",
                                    "currentChargingBasis",
                                    "consequentialChargingBasis"
                                  ],
                                  "properties": {
                                    "sewerageProvider": {
                                      "con29DWRef": "4.1.1",
                                      "title": "Who is responsible for providing the sewerage services for the property?"
                                    },
                                    "waterProvider": {
                                      "con29DWRef": "4.1.2",
                                      "title": "Who is responsible for providing the water services for the property?"
                                    },
                                    "sewerageBills": {
                                      "con29DWRef": "4.2",
                                      "title": "Who bills the property for sewerage services?"
                                    },
                                    "waterBills": {
                                      "con29DWRef": "4.3",
                                      "title": "Who bills the property for water services?"
                                    },
                                    "currentChargingBasis": {
                                      "con29DWRef": "4.4",
                                      "title": "What is the current basis for charging for sewerage and/or water services at the property?"
                                    },
                                    "consequentialChargingBasis": {
                                      "con29DWRef": "4.5",
                                      "title": "Will the basis for charging for sewerage and water services at the property change as a consequence of a change of occupation?"
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            ]
          }
        }
      }
    }
  }
}